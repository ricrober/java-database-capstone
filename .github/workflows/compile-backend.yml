name: Compile Java Backend

# Triggers the workflow on any push or pull request to the repository
on: [push, pull_request]

jobs:
  compile-backend:
    runs-on: ubuntu-latest
    name: Compile Backend Code
    
    steps:
      # Step 1: Check out the source code from the repository
      - name: Checkout Repository
        uses: actions/checkout@v4

      # Step 2: Set up the Java Runtime environment
      # Using Temurin (Eclipse Foundation) distribution for compatibility
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '17'
          cache: 'maven' # Caches dependencies to speed up subsequent runs

      # Step 3: Ensure the Maven Wrapper script is executable
      # This is necessary because file permissions can sometimes be lost in Git
      - name: Grant execute permission for mvnw
        run: chmod +x app/mvnw

      # Step 4: Compile the code using the Maven Wrapper
      # Using ./mvnw ensures the project uses its own consistent Maven version
      - name: Compile with Maven Wrapper
        run: |
          cd app
          ./mvnw clean compile
